{"version":3,"sources":["Services/AuthService.js","Context/AuthContext.js","Components/Navbar/index.js","Components/Message/index.js","Components/Login/index.js","Components/Home/index.js","Components/TodoItem/index.js","Services/TodoService.js","Components/Todos/index.js","Components/Register/index.js","Components/Admin/index.js","hocs/UnPrivateRoute.js","hocs/PrivateRoute.js","App.js","index.js"],"names":["AuthService","user","fetch","method","body","JSON","stringify","headers","Content-Type","then","res","status","json","data","isAuthenticated","username","role","AuthContext","createContext","Context_AuthContext","_ref","children","_useState","useState","_useState2","Object","slicedToArray","setUser","_useState3","_useState4","setIsAuthenticated","_useState5","_useState6","isLoaded","setIsLoaded","useEffect","react_default","a","createElement","Provider","value","Navbar","props","_useContext","useContext","onClickLogoutHandler","success","className","react_router_dom","to","id","Fragment","type","onClick","getStyle","baseClass","message","msgError","Message","msgBody","Login","password","setMessage","authContext","onChange","e","preventDefault","objectSpread","defineProperty","target","name","console","log","onSubmit","history","push","htmlFor","placeholder","Components_Message","Home","TodoItem","todo","TodoService","response","Content=Type","Todos","setTodo","todos","setTodos","resetForm","map","Components_TodoItem","key","_id","getData","Register","timerID","useRef","clearTimeout","uesrname","setTimeout","Admin","UnPrivateRoute","Component","component","rest","objectWithoutProperties","react_router","assign","render","pathname","state","from","location","PrivateRoute","roles","includes","App","Components_Navbar","exact","path","hocs_UnPrivateRoute","hocs_PrivateRoute","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.bf711257.chunk.js","sourcesContent":["export default {\r\n    login : user => {\r\n        return fetch('/user/login', {\r\n            method : 'post',\r\n            body : JSON.stringify(user),\r\n            headers : {\r\n                'Content-Type' : 'application/json'\r\n            }\r\n        }).then(res => {\r\n            if(res.status !== 401)\r\n                return res.json().then(data=> data);\r\n                else   \r\n                    return {isAuthenticated : false, user : {username : '', role : ''}};\r\n        })\r\n    },\r\n    register : user => {\r\n        return fetch('/user/register', {\r\n            method : 'post',\r\n            body : JSON.stringify(user),\r\n            headers : {\r\n                'Content-Type' : 'application/json'\r\n            }\r\n        }).then(res => res.json())\r\n            .then(data => data);\r\n    },\r\n    logout : () => {\r\n        return fetch('/user/logout')\r\n            .then(res => res.json())\r\n            .then(data => data);\r\n    },\r\n    isAuthenticated : () => {\r\n        return fetch('/user/authenticated')\r\n            .then(res => {\r\n                if (res.status !== 401)\r\n                    return res.json().then(data => data);\r\n                else    \r\n                    return { isAuthenticated : false, user : {username : '', role : ''}};\r\n            }) \r\n    }\r\n}","import React, {createContext, useState, useEffect } from 'react';\r\nimport AuthService from '../Services/AuthService';\r\n\r\nexport const AuthContext = createContext();\r\n\r\n// components we want to wrap our provider around\r\nexport default ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n    // boolean value to see if app is loaded, once we get server isloaded is set to true\r\n    const [isLoaded, setIsLoaded] = useState(null);\r\n\r\n    useEffect(() => {\r\n        AuthService.isAuthenticated().then(data => {\r\n            setUser(data.user);\r\n            setIsAuthenticated(data.isAuthenticated);\r\n            setIsLoaded(true);\r\n        });\r\n    }, []);\r\n    return (\r\n        <div>\r\n            {!isLoaded ? <h1>Loading..</h1> : \r\n                <AuthContext.Provider value={{user, setUser, isAuthenticated, setIsAuthenticated}}>\r\n                    { children }\r\n                </AuthContext.Provider>}\r\n        </div>\r\n    )\r\n}","import React, {useContext} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport AuthService from '../../Services/AuthService';\r\nimport {AuthContext } from '../../Context/AuthContext';\r\n\r\nconst Navbar = props => {\r\n    const {isAuthenticated, user, setIsAuthenticated, setUser} = useContext(AuthContext);\r\n\r\n    const onClickLogoutHandler = () => {\r\n        AuthService.logout().then(data => {\r\n            if(data.success) {\r\n                setUser(data.user);\r\n                setIsAuthenticated(false);\r\n            }\r\n        })\r\n    }\r\n    const unauthenticatedNavBar = () => {\r\n        return (\r\n            <>\r\n                <Link to='/'>\r\n                    <li className='nav-item nav-link'>\r\n                        Home\r\n                    </li>\r\n                </Link>\r\n                <Link to='/login'>\r\n                    <li className='nav-item nav-link'>\r\n                        Login\r\n                    </li>\r\n                </Link>\r\n                <Link to='/register'>\r\n                    <li className='nav-item nav-link'>\r\n                        Register\r\n                    </li>\r\n                </Link>\r\n            </>\r\n        )\r\n    }\r\n\r\n    const authenticatedNavBar = () => {\r\n        return(\r\n            <>\r\n            <Link to='/'>\r\n                    <li className='nav-item nav-link'>\r\n                        Home\r\n                    </li>\r\n                </Link>\r\n                <Link to='/todos'>\r\n                    <li className='nav-item nav-link'>\r\n                        Todos\r\n                    </li>\r\n                </Link>\r\n                {\r\n                    user.role === 'admin' ?\r\n                    <Link to='/admin'>\r\n                        <li className='nav-item nav-link'>\r\n                            Admin\r\n                        </li>\r\n                    </Link> : null\r\n                }\r\n                <button \r\n                type='button' \r\n                className='btn btn-link nav-item nav-link' \r\n                onClick={onClickLogoutHandler}>Logout</button>\r\n            </>\r\n        )\r\n    }\r\n    return(\r\n        <nav className='navbar navbar-expand-lg navbar-light bg-light'>\r\n            <Link to='/'>\r\n                <div className='navbar-brand'>Trace</div>\r\n            </Link>\r\n            <div className='collapse navbar-collapse' id='navbarText'>\r\n                <ul className='navbar-nav mr-auto'>\r\n                    { !isAuthenticated ? unauthenticatedNavBar() : authenticatedNavBar()}\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default Navbar","import React from 'react';\r\n\r\nconst getStyle = (props) => {\r\n    let baseClass = 'alert';\r\n    if (props.message.msgError)\r\n        baseClass = baseClass + 'alert-danger';\r\n    else    \r\n        baseClass = baseClass + 'alert-primary';\r\n    return baseClass + 'text-center';\r\n}\r\nconst Message = props => {\r\n    return(\r\n        <div className={getStyle(props)} role='alert'>\r\n            {props.message.msgBody}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","import React, {useState, useContext} from 'react';\r\nimport AuthService from '../../Services/AuthService';\r\nimport Message from '../Message';\r\nimport { AuthContext} from '../../Context/AuthContext';\r\n\r\nconst Login = props => {\r\n    const [user, setUser] = useState({username: '', password: ''});\r\n    const [message, setMessage] = useState(null);\r\n    const authContext = useContext(AuthContext);\r\n\r\n    const onChange = e => {\r\n        e.preventDefault();\r\n        setUser({...user, [e.target.name] : e.target.value});\r\n        console.log(user);\r\n    }\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n        AuthService.login(user).then(data => {\r\n            console.log(data);\r\n            const { isAuthenticated, user, message} = data;\r\n            if (isAuthenticated) {\r\n                authContext.setUser(user);\r\n                authContext.setIsAuthenticated(isAuthenticated);\r\n                props.history.push('/todos');\r\n            }\r\n            else    \r\n                setMessage(message);\r\n        })\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <form onSubmit={onSubmit}>\r\n                <h3>Please Sign In</h3>\r\n                <label htmlFor='username' className='sr-only'>Username: </label>\r\n                <input type='text' \r\n                name='username' \r\n                onChange={onChange} \r\n                className='form-control' \r\n                placeholder='Enter Username'/>\r\n                <label htmlFor='username' className='sr-only'>Password: </label>\r\n                <input type='text' \r\n                name='password' \r\n                onChange={onChange} \r\n                className='form-control' \r\n                placeholder='Enter Password'/>\r\n                <button className='btn btn-lg btn-primary btn-block'\r\n                type='submit'>Log in</button>\r\n            </form>\r\n            {message ? <Message message={message}/> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\n\r\nconst Home = () => {\r\n    return (\r\n    <h1>Home Page</h1>\r\n    )\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\n\r\nconst TodoItem = props => {\r\n    return (\r\n        <li>{props.todo.name}</li>\r\n    )\r\n}\r\n\r\nexport default TodoItem;","export default {\r\n    getTodos : () => {\r\n        return fetch('/user/todos')\r\n            .then(response => {\r\n                // passport sends 401 if user is not authorized\r\n                if(response.status !== 401) {\r\n                    return response.json().then(data => data);\r\n                } else {\r\n                    return {message : {msgBody : 'UnAuthorized'}, msgError : true}\r\n                }\r\n            })\r\n    },\r\n    postTodo : todo => {\r\n        return fetch('/user/todo', {\r\n        method : 'post',\r\n        body : JSON.stringify(todo),\r\n        headers : {\r\n            'Content=Type' : 'application/json'\r\n        }\r\n    }).then(response => {\r\n        if(response.status !== 401) {\r\n            return response.json().then(data => data);\r\n        } else {\r\n            return {message : {msgBody : 'UnAuthorized'}, msgError : true}\r\n        }\r\n    })\r\n}\r\n}","import React, { useState, useContext, useEffect } from 'react';\r\nimport TodoItem from '../TodoItem';\r\nimport TodoService from '../../Services/TodoService';\r\nimport Message from '../Message';\r\nimport { AuthContext } from '../../Context/AuthContext';\r\n\r\nconst Todos = props => {\r\n    const [todo, setTodo] = useState({name : ''});\r\n    const [todos, setTodos] = useState([]);\r\n    const [message, setMessage] = useState(null);\r\n    const authContext = useContext(AuthContext);\r\n\r\n    useEffect(() => {\r\n        TodoService.getTodos().then(data => {\r\n            setTodos(data.todos);\r\n        });\r\n    }, []);\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n        TodoService.postTodo(todo).then(data => {\r\n            const { message } = data;\r\n            resetForm();\r\n            if(!message.msgError){\r\n                TodoService.getTodos().then(getData => {\r\n                    setTodos(getData.todos);\r\n                    setMessage(message);\r\n                })\r\n            }\r\n            else if(message.msgBody === 'UnAuthorized') {\r\n                setMessage(message);\r\n                authContext.setUser({username : '', role : ''});\r\n                authContext.setIsAuthenticated(false);\r\n            }\r\n            else {\r\n                setMessage(message);\r\n            }\r\n        })\r\n    }\r\n\r\n    const onChange = e => {\r\n        setTodo({ name : e.target.value });\r\n    }\r\n\r\n    const resetForm = () => {\r\n        setTodo({ name : ''});\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <ul className='list-group'>\r\n                {\r\n                    todos.map(todo => {\r\n                        return <TodoItem key={todo._id} todo={todo}/>\r\n                    })\r\n                }\r\n            </ul>\r\n            <br />\r\n            <form onSubmit={onSubmit}>\r\n                <label htmlFor='todo'>Enter Todo</label>\r\n                <input \r\n                    type='text' \r\n                    name='todo' \r\n                    value={todo.name} \r\n                    onChange={onChange}\r\n                    className='form-control'\r\n                    placeholder='Please Enter Todo'/>\r\n                <button className='btn btn-lg btn-primary btn-block'\r\n                    type='submit'>Submit</button>\r\n            </form>\r\n            {message ? <Message message={message} /> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Todos;","import React, {useState, useRef, useEffect} from 'react';\r\nimport AuthService from '../../Services/AuthService';\r\nimport Message from '../Message';\r\n\r\nconst Register = props => {\r\n    const [user, setUser] = useState({username : '', password : '', role : ''});\r\n    const [message, setMessage] = useState(null);\r\n    let timerID = useRef(null);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            clearTimeout(timerID)\r\n        }\r\n    }, []);\r\n\r\n    const onChange = e => {\r\n        setUser({...user, [e.target.name] : e.target.value})\r\n    }\r\n\r\n    const resetForm = () => {\r\n        setUser({uesrname : '', password : '', role: ''});\r\n    }\r\n\r\n    const onSubmit = e => {\r\n        e.preventDefault();\r\n        AuthService.register(user).then(data => {\r\n            const { message } = data;\r\n            setMessage(message);\r\n            resetForm();\r\n            if(!message.msgError){\r\n                timerID = setTimeout(() => {\r\n                    props.history.push('/login');\r\n                }, 2000)\r\n            }\r\n        })\r\n    }\r\n    return(\r\n        <div>\r\n            <form onSubmit={onSubmit}>\r\n                <h3>Please Register</h3>\r\n                <label htmlFor='username' className='sr-only'>Username: </label>\r\n                <input type='text' \r\n                name='username' \r\n                value={user.username}\r\n                onChange={onChange} \r\n                className='form-control' \r\n                placeholder='Enter Username'/>\r\n                <label htmlFor='username' className='sr-only'>Password: </label>\r\n                <input type='text' \r\n                name='password' \r\n                value={user.password}\r\n                onChange={onChange} \r\n                className='form-control' \r\n                placeholder='Enter Password'/>\r\n                <label htmlFor='role' className='sr-only'>Role: </label>\r\n                <input type='text' \r\n                name='role' \r\n                value={user.role}\r\n                onChange={onChange} \r\n                className='form-control' \r\n                placeholder='Enter role (admin/user)'/>\r\n                <button className='btn btn-lg btn-primary btn-block'\r\n                type='submit'>Register</button>\r\n            </form>\r\n            {message ? <Message message={message}/> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Register","import React from 'react';\r\n\r\nconst Admin = () => {\r\n    return(\r\n    <h1>Admin Page</h1>\r\n    )\r\n}\r\n\r\nexport default Admin;","import React, {useContext} from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { AuthContext } from '../Context/AuthContext';\r\n\r\n// here we only care if user is authenticated or not\r\nconst UnPrivateRoute = ({component : Component, ...rest}) => {\r\n    const { isAuthenticated } = useContext(AuthContext);\r\n    return(\r\n        <Route {...rest} render={props => {\r\n            if (!isAuthenticated)\r\n                return <Redirect to={{ pathname: '/', \r\n                state : {from : props.location}}} />\r\n                \r\n            return <Component {...props}/>\r\n        }}/>\r\n    )\r\n}\r\n\r\nexport default UnPrivateRoute;","import React, {useContext} from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { AuthContext } from '../Context/AuthContext';\r\n\r\nconst PrivateRoute = ({component : Component, roles, ...rest}) => {\r\n    const { isAuthenticated, user } = useContext(AuthContext);\r\n    return(\r\n        <Route {...rest} render={props => {\r\n            if (!isAuthenticated)\r\n                return <Redirect to={{ pathname: '/login', \r\n                state : {from : props.location}}} />\r\n\r\n            if (!roles.includes(user.role))\r\n                return <Redirect to={{ pathname: '/', \r\n                state : {from : props.location}}} />\r\n            return <Component {...props}/>\r\n        }}/>\r\n    )\r\n}\r\n\r\nexport default PrivateRoute;","import React from \"react\";\nimport Navbar from './Components/Navbar';\nimport Login from './Components/Login';\nimport Home from './Components/Home';\nimport Todos from './Components/Todos';\nimport Register from './Components/Register';\nimport Admin from './Components/Admin';\nimport UnPrivateRoute from './hocs/UnPrivateRoute';\nimport PrivateRoute from './hocs/PrivateRoute';\nimport { BrowserRouter as Router, Route} from 'react-router-dom';\n\nfunction App() {\n  return (\n    <Router>\n      <Navbar />\n      <Route exact path='/' component={Home} />\n      <UnPrivateRoute path='/login' component={Login} />\n      <UnPrivateRoute path='/register' component={Register} />\n      <PrivateRoute path='/todos' roles={['user', 'admin']} component={Todos} />\n      <PrivateRoute path='/admin' roles={['admin']} component={Admin} />\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport AuthProvider from './Context/AuthContext';\n\n\nReactDOM.render(\n    <AuthProvider>\n    <App />\n    </AuthProvider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}